---
timestamp: 'Mon Dec 01 2025 22:30:26 GMT-0500 (Eastern Standard Time)'
parent: '[[../20251201_223026.fc0755d8.md]]'
content_id: b9fefdce4ea4aca43ba60a955a17c3f04653b30cd4ec113301afe77a434405d4
---

# prompt: here it is:          "external\_urls": {

```
          "spotify": "https://open.spotify.com/artist/6U1dV7aL68N7Gb0Naq34V5"
        },
        "href": "https://api.spotify.com/v1/artists/6U1dV7aL68N7Gb0Naq34V5",
        "id": "6U1dV7aL68N7Gb0Naq34V5",
        "name": "REI AMI",
        "type": "artist",
        "uri": "spotify:artist:6U1dV7aL68N7Gb0Naq34V5"
      },
      {
        "external_urls": {
          "spotify": "https://open.spotify.com/artist/7mW7Tv7NvywKKXqafZo0Lc"
        },
        "href": "https://api.spotify.com/v1/artists/7mW7Tv7NvywKKXqafZo0Lc",
        "id": "7mW7Tv7NvywKKXqafZo0Lc",
        "name": "KPop Demon Hunters Cast",
        "type": "artist",
        "uri": "spotify:artist:7mW7Tv7NvywKKXqafZo0Lc"
      }
    ],
    "available_markets": [
      "AR",
      "AU",
      "AT",
      "BE",
      "BO",
      "BR",
      "BG",
      "CA",
      "CL",
      "CO",
      "CR",
      "CY",
      "CZ",
      "DK",
      "DO",
      "DE",
      "EC",
      "EE",
      "SV",
      "FI",
      "FR",
      "GR",
      "GT",
      "HN",
      "HK",
      "HU",
      "IS",
      "IE",
      "IT",
      "LV",
      "LT",
      "LU",
      "MY",
      "MT",
      "MX",
      "NL",
      "NZ",
      "NI",
      "NO",
      "PA",
      "PY",
      "PE",
      "PH",
      "PL",
      "PT",
      "SG",
      "SK",
      "ES",
      "SE",
      "CH",
      "TW",
      "TR",
      "UY",
      "US",
      "GB",
      "AD",
      "LI",
      "MC",
      "ID",
      "JP",
      "TH",
      "VN",
      "RO",
      "IL",
      "ZA",
      "SA",
      "AE",
      "BH",
      "QA",
      "OM",
      "KW",
      "EG",
      "MA",
      "DZ",
      "TN",
      "LB",
      "JO",
      "PS",
      "IN",
      "KZ",
      "MD",
      "UA",
      "AL",
      "BA",
      "HR",
      "ME",
      "MK",
      "RS",
      "SI",
      "KR",
      "BD",
      "PK",
      "LK",
      "GH",
      "KE",
      "NG",
      "TZ",
      "UG",
      "AG",
      "AM",
      "BS",
      "BB",
      "BZ",
      "BT",
      "BW",
      "BF",
      "CV",
      "CW",
      "DM",
      "FJ",
      "GM",
      "GE",
      "GD",
      "GW",
      "GY",
      "HT",
      "JM",
      "KI",
      "LS",
      "LR",
      "MW",
      "MV",
      "ML",
      "MH",
      "FM",
      "NA",
      "NR",
      "NE",
      "PW",
      "PG",
      "WS",
      "SM",
      "ST",
      "SN",
      "SC",
      "SL",
      "SB",
      "KN",
      "LC",
      "VC",
      "SR",
      "TL",
      "TO",
      "TT",
      "TV",
      "VU",
      "AZ",
      "BN",
      "BI",
      "KH",
      "CM",
      "TD",
      "KM",
      "GQ",
      "SZ",
      "GA",
      "GN",
      "KG",
      "LA",
      "MO",
      "MR",
      "MN",
      "NP",
      "RW",
      "TG",
      "UZ",
      "ZW",
      "BJ",
      "MG",
      "MU",
      "MZ",
      "AO",
      "CI",
      "DJ",
      "ZM",
      "CD",
      "CG",
      "IQ",
      "LY",
      "TJ",
      "VE",
      "ET",
      "XK"
    ],
    "disc_number": 1,
    "duration_ms": 176059,
    "explicit": false,
    "external_ids": {
      "isrc": "QZ8BZ2513508"
    },
    "external_urls": {
      "spotify": "https://open.spotify.com/track/3RXUgPNIbUgFxsDWuBQEt6"
    },
    "href": "https://api.spotify.com/v1/tracks/3RXUgPNIbUgFxsDWuBQEt6",
    "id": "3RXUgPNIbUgFxsDWuBQEt6",
    "is_local": false,
    "is_playable": true,
    "name": "How It’s Done",
    "popularity": 91,
    "preview_url": null,
    "track_number": 2,
    "type": "track",
    "uri": "spotify:track:3RXUgPNIbUgFxsDWuBQEt6"
  },
  {
    "album": {
      "album_type": "album",
      "artists": [
        {
          "external_urls": {
            "spotify": "https://open.spotify.com/artist/5RTLRtXjbXI2lSXc6jxlAz"
          },
          "href": "https://api.spotify.com/v1/artists/5RTLRtXjbXI2lSXc6jxlAz",
          "id": "5RTLRtXjbXI2lSXc6jxlAz",
          "name": "Ravyn Lenae",
          "type": "artist",
          "uri": "spotify:artist:5RTLRtXjbXI2lSXc6jxlAz"
        }
      ],
      "available_markets": [
        "AR",
        "AU",
        "AT",
        "BE",
        "BO",
        "BR",
        "BG",
        "CA",
        "CL",
        "CO",
        "CR",
        "CY",
        "CZ",
        "DK",
        "DO",
        "DE",
        "EC",
        "EE",
        "SV",
        "FI",
        "FR",
        "GR",
        "GT",
        "HN",
        "HK",
        "HU",
        "IS",
        "IE",
        "IT",
        "LV",
        "LT",
        "LU",
        "MY",
        "MT",
        "MX",
        "NL",
        "NZ",
        "NI",
        "NO",
        "PA",
        "PY",
        "PE",
        "PH",
        "PL",
        "PT",
        "SG",
        "SK",
        "ES",
        "SE",
        "CH",
        "TW",
        "TR",
        "UY",
        "US",
        "GB",
        "AD",
        "LI",
        "MC",
        "ID",
        "JP",
        "TH",
        "VN",
        "RO",
        "IL",
        "ZA",
        "SA",
        "AE",
        "BH",
        "QA",
        "OM",
        "KW",
        "EG",
        "MA",
        "DZ",
        "TN",
        "LB",
        "JO",
        "PS",
        "IN",
        "KZ",
        "MD",
        "UA",
        "AL",
        "BA",
        "HR",
        "ME",
        "MK",
        "RS",
        "SI",
        "KR",
        "BD",
        "PK",
        "LK",
        "GH",
        "KE",
        "NG",
        "TZ",
        "UG",
        "AG",
        "AM",
        "BS",
        "BB",
        "BZ",
        "BT",
        "BW",
        "BF",
        "CV",
        "CW",
        "DM",
        "FJ",
        "GM",
        "GE",
        "GD",
        "GW",
        "GY",
        "HT",
        "JM",
        "KI",
        "LS",
        "LR",
        "MW",
        "MV",
        "ML",
        "MH",
        "FM",
        "NA",
        "NR",
        "NE",
        "PW",
        "PG",
        "PR",
        "WS",
        "SM",
        "ST",
        "SN",
        "SC",
        "SL",
        "SB",
        "KN",
        "LC",
        "VC",
        "SR",
        "TL",
        "TO",
        "TT",
        "TV",
        "VU",
        "AZ",
        "BN",
        "BI",
        "KH",
        "CM",
        "TD",
        "KM",
        "GQ",
        "SZ",
        "GA",
        "GN",
        "KG",
        "LA",
        "MO",
        "MR",
        "MN",
        "NP",
        "RW",
        "TG",
        "UZ",
        "ZW",
        "BJ",
        "MG",
        "MU",
        "MZ",
        "AO",
        "CI",
        "DJ",
        "ZM",
        "CD",
        "CG",
        "IQ",
        "LY",
        "TJ",
        "VE",
        "ET",
        "XK"
      ],
      "external_urls": {
        "spotify": "https://open.spotify.com/album/1uE3dRPe3SrGdNhd1nWlSa"
      },
      "href": "https://api.spotify.com/v1/albums/1uE3dRPe3SrGdNhd1nWlSa",
      "id": "1uE3dRPe3SrGdNhd1nWlSa",
      "images": [
        {
          "height": 640,
          "width": 640,
          "url": "https://i.scdn.co/image/ab67616d0000b273ef985ba96e76a9574cc68a30"
        },
        {
          "height": 300,
          "width": 300,
          "url": "https://i.scdn.co/image/ab67616d00001e02ef985ba96e76a9574cc68a30"
        },
        {
          "height": 64,
          "width": 64,
          "url": "https://i.scdn.co/image/ab67616d00004851ef985ba96e76a9574cc68a30"
        }
      ],
      "is_playable": true,
      "name": "Bird's Eye",
      "release_date": "2024-08-09",
      "release_date_precision": "day",
      "total_tracks": 11,
      "type": "album",
      "uri": "spotify:album:1uE3dRPe3SrGdNhd1nWlSa"
    },
    "artists": [
      {
        "external_urls": {
          "spotify": "https://open.spotify.com/artist/5RTLRtXjbXI2lSXc6jxlAz"
        },
        "href": "https://api.spotify.com/v1/artists/5RTLRtXjbXI2lSXc6jxlAz",
        "id": "5RTLRtXjbXI2lSXc6jxlAz",
        "name": "Ravyn Lenae",
        "type": "artist",
        "uri": "spotify:artist:5RTLRtXjbXI2lSXc6jxlAz"
      }
    ],
    "available_markets": [
      "AR",
      "AU",
      "AT",
      "BE",
      "BO",
      "BR",
      "BG",
      "CA",
      "CL",
      "CO",
      "CR",
      "CY",
      "CZ",
      "DK",
      "DO",
      "DE",
      "EC",
      "EE",
      "SV",
      "FI",
      "FR",
      "GR",
      "GT",
      "HN",
      "HK",
      "HU",
      "IS",
      "IE",
      "IT",
      "LV",
      "LT",
      "LU",
      "MY",
      "MT",
      "MX",
      "NL",
      "NZ",
      "NI",
      "NO",
      "PA",
      "PY",
      "PE",
      "PH",
      "PL",
      "PT",
      "SG",
      "SK",
      "ES",
      "SE",
      "CH",
      "TW",
      "TR",
      "UY",
      "US",
      "GB",
      "AD",
      "LI",
      "MC",
      "ID",
      "JP",
      "TH",
      "VN",
      "RO",
      "IL",
      "ZA",
      "SA",
      "AE",
      "BH",
      "QA",
      "OM",
      "KW",
      "EG",
      "MA",
      "DZ",
      "TN",
      "LB",
      "JO",
      "PS",
      "IN",
      "KZ",
      "MD",
      "UA",
      "AL",
      "BA",
      "HR",
      "ME",
      "MK",
      "RS",
      "SI",
      "KR",
      "BD",
      "PK",
      "LK",
      "GH",
      "KE",
      "NG",
      "TZ",
      "UG",
      "AG",
      "AM",
      "BS",
      "BB",
      "BZ",
      "BT",
      "BW",
      "BF",
      "CV",
      "CW",
      "DM",
      "FJ",
      "GM",
      "GE",
      "GD",
      "GW",
      "GY",
      "HT",
      "JM",
      "KI",
      "LS",
      "LR",
      "MW",
      "MV",
      "ML",
      "MH",
      "FM",
      "NA",
      "NR",
      "NE",
      "PW",
      "PG",
      "PR",
      "WS",
      "SM",
      "ST",
      "SN",
      "SC",
      "SL",
      "SB",
      "KN",
      "LC",
      "VC",
      "SR",
      "TL",
      "TO",
      "TT",
      "TV",
      "VU",
      "AZ",
      "BN",
      "BI",
      "KH",
      "CM",
      "TD",
      "KM",
      "GQ",
      "SZ",
      "GA",
      "GN",
      "KG",
      "LA",
      "MO",
      "MR",
      "MN",
      "NP",
      "RW",
      "TG",
      "UZ",
      "ZW",
      "BJ",
      "MG",
      "MU",
      "MZ",
      "AO",
      "CI",
      "DJ",
      "ZM",
      "CD",
      "CG",
      "IQ",
      "LY",
      "TJ",
      "VE",
      "ET",
      "XK"
    ],
    "disc_number": 1,
    "duration_ms": 213466,
    "explicit": false,
    "external_ids": {
      "isrc": "USAT22401137"
    },
    "external_urls": {
      "spotify": "https://open.spotify.com/track/4WFgvKVfEhb3IUAFGrutTR"
    },
    "href": "https://api.spotify.com/v1/tracks/4WFgvKVfEhb3IUAFGrutTR",
    "id": "4WFgvKVfEhb3IUAFGrutTR",
    "is_local": false,
    "is_playable": true,
    "name": "Love Me Not",
    "popularity": 89,
    "preview_url": null,
    "track_number": 7,
    "type": "track",
    "uri": "spotify:track:4WFgvKVfEhb3IUAFGrutTR"
  }
]
```

}
}
\[MusicDiscovery:search] Raw Spotify search results received.
\[MusicDiscovery:search] Extracted 20 Spotify items for type 'track'.
\[MusicDiscovery:search] Processing Spotify item: ID=4qlXjS7ag4aULDndARRlKR, Name='Nothing'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 4qlXjS7ag4aULDndARRlKR: {
externalId: "4qlXjS7ag4aULDndARRlKR",
name: "Nothing",
uri: "spotify:track:4qlXjS7ag4aULDndARRlKR",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273ef1c3585a069516fe9bb6b0f",
externalUrl: "https://open.spotify.com/track/4qlXjS7ag4aULDndARRlKR",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 4qlXjS7ag4aULDndARRlKR (internal: 019add1b-4840-76a7-849d-6f7a22bacc80)
\[MusicDiscovery:search] Processing Spotify item: ID=5zl7PIDlaPYQGQVAFFWJpX, Name='Nothing'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 5zl7PIDlaPYQGQVAFFWJpX: {
externalId: "5zl7PIDlaPYQGQVAFFWJpX",
name: "Nothing",
uri: "spotify:track:5zl7PIDlaPYQGQVAFFWJpX",
imageUrl: "https://i.scdn.co/image/ab67616d0000b27394a6c286ff5448ab3bbda98c",
externalUrl: "https://open.spotify.com/track/5zl7PIDlaPYQGQVAFFWJpX",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 5zl7PIDlaPYQGQVAFFWJpX (internal: 019add1b-48a0-7a4d-8734-6122c45fc79c)
\[MusicDiscovery:search] Processing Spotify item: ID=0e88tXWHchpefOwYieWvlg, Name='realise'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 0e88tXWHchpefOwYieWvlg: {
externalId: "0e88tXWHchpefOwYieWvlg",
name: "realise",
uri: "spotify:track:0e88tXWHchpefOwYieWvlg",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273170b269ea0ef2d931545801d",
externalUrl: "https://open.spotify.com/track/0e88tXWHchpefOwYieWvlg",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 0e88tXWHchpefOwYieWvlg (internal: 019add1b-4900-7318-9c43-b1f8a6b50a77)
\[MusicDiscovery:search] Processing Spotify item: ID=11EX5yhxr9Ihl3IN1asrfK, Name='Need You Now'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 11EX5yhxr9Ihl3IN1asrfK: {
externalId: "11EX5yhxr9Ihl3IN1asrfK",
name: "Need You Now",
uri: "spotify:track:11EX5yhxr9Ihl3IN1asrfK",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2733a2cc6c5cdd9f07a95efa51b",
externalUrl: "https://open.spotify.com/track/11EX5yhxr9Ihl3IN1asrfK",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 11EX5yhxr9Ihl3IN1asrfK (internal: 019add1b-495b-7552-a65b-3ff4ca040f1f)
\[MusicDiscovery:search] Processing Spotify item: ID=0hYfQgFiqCDAxhgkkWfGH3, Name='Ex (fucked up)'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 0hYfQgFiqCDAxhgkkWfGH3: {
externalId: "0hYfQgFiqCDAxhgkkWfGH3",
name: "Ex (fucked up)",
uri: "spotify:track:0hYfQgFiqCDAxhgkkWfGH3",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273fe7e7e1a25a3ca5dc5f151e1",
externalUrl: "https://open.spotify.com/track/0hYfQgFiqCDAxhgkkWfGH3",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 0hYfQgFiqCDAxhgkkWfGH3 (internal: 019add1b-49bd-71ad-b4fb-9831d48b549d)
\[MusicDiscovery:search] Processing Spotify item: ID=6Qy14rBTecegmqmsvrlDLk, Name='Pill'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 6Qy14rBTecegmqmsvrlDLk: {
externalId: "6Qy14rBTecegmqmsvrlDLk",
name: "Pill",
uri: "spotify:track:6Qy14rBTecegmqmsvrlDLk",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273941b16d4509fd30c33d5091d",
externalUrl: "https://open.spotify.com/track/6Qy14rBTecegmqmsvrlDLk",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 6Qy14rBTecegmqmsvrlDLk (internal: 019add1b-4a19-709a-9f27-054149b8f7c3)
\[MusicDiscovery:search] Processing Spotify item: ID=7h70RTLbnhDyPGXjl3iEhh, Name='Need You Now'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 7h70RTLbnhDyPGXjl3iEhh: {
externalId: "7h70RTLbnhDyPGXjl3iEhh",
name: "Need You Now",
uri: "spotify:track:7h70RTLbnhDyPGXjl3iEhh",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273c98082925b7f4bd15722c498",
externalUrl: "https://open.spotify.com/track/7h70RTLbnhDyPGXjl3iEhh",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 7h70RTLbnhDyPGXjl3iEhh (internal: 019add1b-4a80-7064-8807-d53096632ef2)
\[MusicDiscovery:search] Processing Spotify item: ID=32eaSGv3EUiBtQYeI31tig, Name='Need You Now'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 32eaSGv3EUiBtQYeI31tig: {
externalId: "32eaSGv3EUiBtQYeI31tig",
name: "Need You Now",
uri: "spotify:track:32eaSGv3EUiBtQYeI31tig",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273b7d3ea27b9b991272e27c5fd",
externalUrl: "https://open.spotify.com/track/32eaSGv3EUiBtQYeI31tig",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 32eaSGv3EUiBtQYeI31tig (internal: 019add1b-4ade-74d7-9ad9-3504a3249a73)
\[MusicDiscovery:search] Processing Spotify item: ID=5RvY3ReERt9o622MqEydNY, Name='Need You Now (How Many Times)'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 5RvY3ReERt9o622MqEydNY: {
externalId: "5RvY3ReERt9o622MqEydNY",
name: "Need You Now (How Many Times)",
uri: "spotify:track:5RvY3ReERt9o622MqEydNY",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2730005dc50e6e00300ba98a524",
externalUrl: "https://open.spotify.com/track/5RvY3ReERt9o622MqEydNY",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 5RvY3ReERt9o622MqEydNY (internal: 019add1b-4b37-7940-be82-30dc62f90bd8)
\[MusicDiscovery:search] Processing Spotify item: ID=1abUzN0mxXuoiGsMvj1FxS, Name='Need You Now'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 1abUzN0mxXuoiGsMvj1FxS: {
externalId: "1abUzN0mxXuoiGsMvj1FxS",
name: "Need You Now",
uri: "spotify:track:1abUzN0mxXuoiGsMvj1FxS",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2732a88080eff00b63bb0249fb9",
externalUrl: "https://open.spotify.com/track/1abUzN0mxXuoiGsMvj1FxS",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 1abUzN0mxXuoiGsMvj1FxS (internal: 019add1b-4b92-78c5-851b-af9b10b76794)
\[MusicDiscovery:search] Processing Spotify item: ID=0mmxKW2KXyjDKgDwNUpfHK, Name='Need You Now'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 0mmxKW2KXyjDKgDwNUpfHK: {
externalId: "0mmxKW2KXyjDKgDwNUpfHK",
name: "Need You Now",
uri: "spotify:track:0mmxKW2KXyjDKgDwNUpfHK",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2733e8a1798daf6428afea71d56",
externalUrl: "https://open.spotify.com/track/0mmxKW2KXyjDKgDwNUpfHK",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 0mmxKW2KXyjDKgDwNUpfHK (internal: 019add1b-4bf4-7895-b880-47588828fb2c)
\[MusicDiscovery:search] Processing Spotify item: ID=1MIpU2U1kUInGTpaCYuVKs, Name='Need You Now - Acoustic'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 1MIpU2U1kUInGTpaCYuVKs: {
externalId: "1MIpU2U1kUInGTpaCYuVKs",
name: "Need You Now - Acoustic",
uri: "spotify:track:1MIpU2U1kUInGTpaCYuVKs",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273b6a5c0a5b8d705e98a89e8e0",
externalUrl: "https://open.spotify.com/track/1MIpU2U1kUInGTpaCYuVKs",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 1MIpU2U1kUInGTpaCYuVKs (internal: 019add1b-4c4f-71a3-8f8b-2d01f7b9074d)
\[MusicDiscovery:search] Processing Spotify item: ID=7rXAx2P4AxJPwPptHpNECV, Name='Need Me Now'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 7rXAx2P4AxJPwPptHpNECV: {
externalId: "7rXAx2P4AxJPwPptHpNECV",
name: "Need Me Now",
uri: "spotify:track:7rXAx2P4AxJPwPptHpNECV",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273e0d41a0cba6f076a7b19346c",
externalUrl: "https://open.spotify.com/track/7rXAx2P4AxJPwPptHpNECV",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 7rXAx2P4AxJPwPptHpNECV (internal: 019add1b-4cd3-78aa-ac9a-686cf8c3cf50)
\[MusicDiscovery:search] Processing Spotify item: ID=4xInIiKipU1mtUogJ3ZdYr, Name='American Honey'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 4xInIiKipU1mtUogJ3ZdYr: {
externalId: "4xInIiKipU1mtUogJ3ZdYr",
name: "American Honey",
uri: "spotify:track:4xInIiKipU1mtUogJ3ZdYr",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2733a2cc6c5cdd9f07a95efa51b",
externalUrl: "https://open.spotify.com/track/4xInIiKipU1mtUogJ3ZdYr",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 4xInIiKipU1mtUogJ3ZdYr (internal: 019add1b-4d33-7bbf-a4da-fffc20108304)
\[MusicDiscovery:search] Processing Spotify item: ID=55lijDD6OAjLFFUHU9tcDm, Name='WHERE IS MY HUSBAND!'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 55lijDD6OAjLFFUHU9tcDm: {
externalId: "55lijDD6OAjLFFUHU9tcDm",
name: "WHERE IS MY HUSBAND!",
uri: "spotify:track:55lijDD6OAjLFFUHU9tcDm",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2737cc8cee5c81409833e540974",
externalUrl: "https://open.spotify.com/track/55lijDD6OAjLFFUHU9tcDm",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 55lijDD6OAjLFFUHU9tcDm (internal: 019add1b-4d92-744a-9f6b-556c9c188a52)
\[MusicDiscovery:search] Processing Spotify item: ID=3cZajhyr8LmtPfHZ9296tj, Name='No Broke Boys'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 3cZajhyr8LmtPfHZ9296tj: {
externalId: "3cZajhyr8LmtPfHZ9296tj",
name: "No Broke Boys",
uri: "spotify:track:3cZajhyr8LmtPfHZ9296tj",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2735dcede7ece7b2cb72cee4eee",
externalUrl: "https://open.spotify.com/track/3cZajhyr8LmtPfHZ9296tj",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 3cZajhyr8LmtPfHZ9296tj (internal: 019add1b-4dee-7051-930d-2233025a9f05)
\[MusicDiscovery:search] Processing Spotify item: ID=1I37Zz2g3hk9eWxaNkj031, Name='Your Idol'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 1I37Zz2g3hk9eWxaNkj031: {
externalId: "1I37Zz2g3hk9eWxaNkj031",
name: "Your Idol",
uri: "spotify:track:1I37Zz2g3hk9eWxaNkj031",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2734dcb6c5df15cf74596ab25a4",
externalUrl: "https://open.spotify.com/track/1I37Zz2g3hk9eWxaNkj031",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 1I37Zz2g3hk9eWxaNkj031 (internal: 019add1b-4e48-750d-a53d-e48c96dbac79)
\[MusicDiscovery:search] Processing Spotify item: ID=02sy7FAs8dkDNYsHp4Ul3f, Name='Soda Pop'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 02sy7FAs8dkDNYsHp4Ul3f: {
externalId: "02sy7FAs8dkDNYsHp4Ul3f",
name: "Soda Pop",
uri: "spotify:track:02sy7FAs8dkDNYsHp4Ul3f",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2734dcb6c5df15cf74596ab25a4",
externalUrl: "https://open.spotify.com/track/02sy7FAs8dkDNYsHp4Ul3f",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 02sy7FAs8dkDNYsHp4Ul3f (internal: 019add1b-4ea3-74ad-8b27-73fdd84bae83)
\[MusicDiscovery:search] Processing Spotify item: ID=3RXUgPNIbUgFxsDWuBQEt6, Name='How It’s Done'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 3RXUgPNIbUgFxsDWuBQEt6: {
externalId: "3RXUgPNIbUgFxsDWuBQEt6",
name: "How It’s Done",
uri: "spotify:track:3RXUgPNIbUgFxsDWuBQEt6",
imageUrl: "https://i.scdn.co/image/ab67616d0000b2734dcb6c5df15cf74596ab25a4",
externalUrl: "https://open.spotify.com/track/3RXUgPNIbUgFxsDWuBQEt6",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 3RXUgPNIbUgFxsDWuBQEt6 (internal: 019add1b-4f0c-7804-876b-eba8299593a0)
\[MusicDiscovery:search] Processing Spotify item: ID=4WFgvKVfEhb3IUAFGrutTR, Name='Love Me Not'
\[MusicDiscovery:mapAndUpsert] Prepared baseItemData for 4WFgvKVfEhb3IUAFGrutTR: {
externalId: "4WFgvKVfEhb3IUAFGrutTR",
name: "Love Me Not",
uri: "spotify:track:4WFgvKVfEhb3IUAFGrutTR",
imageUrl: "https://i.scdn.co/image/ab67616d0000b273ef985ba96e76a9574cc68a30",
externalUrl: "https://open.spotify.com/track/4WFgvKVfEhb3IUAFGrutTR",
type: "track"
}
\[MusicDiscovery:mapAndUpsert] Inserted new MusicItemDoc for 4WFgvKVfEhb3IUAFGrutTR (internal: 019add1b-4f6d-7aa6-be25-189c84445c55)
First Track from searchResult: {
"\_id": "019add1b-4840-76a7-849d-6f7a22bacc80",
"externalId": "4qlXjS7ag4aULDndARRlKR",
"name": "Nothing",
"uri": "spotify:track:4qlXjS7ag4aULDndARRlKR",
"imageUrl": "https://i.scdn.co/image/ab67616d0000b273ef1c3585a069516fe9bb6b0f",
"externalUrl": "https://open.spotify.com/track/4qlXjS7ag4aULDndARRlKR",
"type": "track",
"id": "019add1b-4840-76a7-849d-6f7a22bacc80",
"durationMs": 168454,
"albumExternalId": "3lHjlVqY2TwNTmaiYF4axv",
"artistExternalId": "2EGp3e4ZNKOUPL5Q6nx4Ic"
}
\----- output end -----

1. User searches for a track ... FAILED (2s)
2. User queries their search results ...
   \------- output -------
   User user:Alice queries their current search results.
   \----- output end -----
3. User queries their search results ... FAILED (381ms)
4. User clears their search results ...
   \------- output -------
   User user:Alice clears their search results.
   User user:Alice's search results cleared. Total cached items: 20
   \----- output end -----
5. User clears their search results ... ok (66ms)
6. User queries their search results after clearing (expect empty) ...
   \------- output -------
   User user:Alice queries search results again.
   Search results for user:Alice are now empty.
   \----- output end -----
7. User queries their search results after clearing (expect empty) ... ok (31ms)
   \------- output -------
   \--- MusicDiscovery Principle Test End ---
   \----- output end -----
   MusicDiscovery Principle: User searches, items are cached, search is cleared ... FAILED (due to 2 failed steps) (3s)
   Action: search with invalid query or type ...
   Should return error for empty query ... ok (0ms)
   Should return error for unsupported type ... ok (0ms)
   Action: search with invalid query or type ... ok (563ms)
   Action: loadTrack caches track and details ...
   ERRORS

MusicDiscovery Principle: User searches, items are cached, search is cleared ... 1. User searches for a track => ./src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:23:13
error: AssertionError: Values are not equal: Track name should contain 'Need You Now'; is 'Nothing' instead.

```
[Diff] Actual / Expected
```

* false

- true

throw new AssertionError(message);
^
at assertEquals (https://jsr.io/@std/assert/1.0.7/equals.ts:51:9)
at file:///Users/laragomez/Desktop/6.1040/noted\_backend/src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:37:7
at eventLoopTick (ext:core/01\_core.js:179:7)
at async innerWrapped (ext:cli/40\_test.js:181:5)
at async exitSanitizer (ext:cli/40\_test.js:97:27)
at async Object.outerWrapped \[as fn] (ext:cli/40\_test.js:124:14)
at async TestContext.step (ext:cli/40\_test.js:511:22)
at async file:///Users/laragomez/Desktop/6.1040/noted\_backend/src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:23:5

MusicDiscovery Principle: User searches, items are cached, search is cleared ... 2. User queries their search results => ./src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:62:13
error: AssertionError: Values are not equal: First item name: 'Nothing'

```
[Diff] Actual / Expected
```

* false

- true

throw new AssertionError(message);
^
at assertEquals (https://jsr.io/@std/assert/1.0.7/equals.ts:51:9)
at file:///Users/laragomez/Desktop/6.1040/noted\_backend/src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:67:7
at eventLoopTick (ext:core/01\_core.js:179:7)
at async innerWrapped (ext:cli/40\_test.js:181:5)
at async exitSanitizer (ext:cli/40\_test.js:97:27)
at async Object.outerWrapped \[as fn] (ext:cli/40\_test.js:124:14)
at async TestContext.step (ext:cli/40\_test.js:511:22)
at async file:///Users/laragomez/Desktop/6.1040/noted\_backend/src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:62:5

FAILURES

MusicDiscovery Principle: User searches, items are cached, search is cleared ... 1. User searches for a track => ./src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:23:13
MusicDiscovery Principle: User searches, items are cached, search is cleared ... 2. User queries their search results => ./src/concepts/MusicDiscovery/MusicDiscoveryConcept.test.ts:62:13

FAILED | 1 passed (4 steps) | 1 failed (2 steps) (4s)

error: MongoExpiredSessionError: Cannot use a session that has ended
at applySession (file:///Users/laragomez/Desktop/6.1040/noted\_backend/node\_modules/.deno/mongodb@7.0.0/node\_modules/mongodb/lib/sessions.js:749:16)
at Connection.prepareCommand (file:///Users/laragomez/Desktop/6.1040/noted\_backend/node\_modules/.deno/mongodb@7.0.0/node\_modules/mongodb/lib/cmap/connection.js:192:62)
at Connection.sendCommand (file:///Users/laragomez/Desktop/6.1040/noted\_backend/node\_modules/.deno/mongodb@7.0.0/node\_modules/mongodb/lib/cmap/connection.js:284:30)
at sendCommand.next (<anonymous>)
at Connection.command (file:///Users/laragomez/Desktop/6.1040/noted\_backend/node\_modules/.deno/mongodb@7.0.0/node\_modules/mongodb/lib/cmap/connection.js:344:26)
at Server.command (file:///Users/laragomez/Desktop/6.1040/noted\_backend/node\_modules/.deno/mongodb@7.0.0/node\_modules/mongodb/lib/sdam/server.js:208:40)
at Object.runMicrotasks (ext:core/01\_core.js:693:26)
at processTicksAndRejections (ext:deno\_node/\_next\_tick.ts:59:10)
at runNextTicks (ext:deno\_node/\_next\_tick.ts:76:3)
at eventLoopTick (ext:core/01\_core.js:186:21)
